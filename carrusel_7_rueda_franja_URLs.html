<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>carrusel_7_rueda_franja_URLs</title>
<style>
  body {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    height: 100vh;
    background: #f0f4f8;
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 20px;
  }

  .circle-container {
    position: relative;
    width: 600px;
    height: 600px;
    border-radius: 50%;
    margin-bottom: 20px;
  }

  .circle-container img {
    position: absolute;
    width: 180px;
    height: 180px;
    border-radius: 10px;
    object-fit: cover;
    transition: transform 0.3s, z-index 0.3s;
  }

  .circle-container img:hover {
    transform: scale(1.3);
    z-index: 20;
  }

  .franja-container {
    position: relative;
    width: 90%;
    max-width: 1950px;
    margin-bottom: 20px;
  }

  .franja {
    display: flex;
    overflow-x: auto;
    gap: 10px;
    padding: 10px;
    border-top: 2px solid #ccc;
    scrollbar-width: thin;
    scrollbar-color: #888 #f0f4f8;
    transition: max-height 0.3s, opacity 0.3s;
  }

  .franja.hidden {
    max-height: 0;
    opacity: 0;
    overflow: hidden;
  }

  .franja::-webkit-scrollbar {
    height: 8px;
  }
  .franja::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 4px;
  }

  .thumb-container {
    position: relative;
    display: inline-block;
    text-align: center;
    font-size: 14px;
    color: #333;
  }

  .thumb-container img {
    width: 100px;
    height: 100px;
    object-fit: cover;
    border-radius: 8px;
    cursor: pointer;
    flex-shrink: 0;
    transition: transform 0.2s;
  }

  .thumb-container img:hover {
    transform: scale(1.1);
    border: 2px solid #333;
  }

  #toggleFranja {
    position: absolute;
    left: 10px;
    top: -40px;
    padding: 6px 14px;
    border: none;
    background: white;
    color: black;
    font-size: 14px;
    cursor: pointer;
    border-radius: 6px;
    z-index: 100;
  }

  #toggleFranja:hover {
    background: #005fa3;
  }
</style>
</head>
<body>

<h2>Almac&eacuten "Carrusel_7"</h2>
<div class="circle-container" id="circle"></div>

<div class="franja-container">
  <button id="toggleFranja">Ocultar franja</button>
  <div class="franja" id="franja"></div>
</div>

<script>
  const container = document.getElementById('circle');
  const franja = document.getElementById('franja');
  const toggleButton = document.getElementById('toggleFranja');

  const images = [];
  let rotation = 0;
  let speed = 0.01;
  let isPaused = false;

  function organizarCirculo() {
    const total = images.length;
    const radius = 200;
    images.forEach((img, i) => {
      const angle = (i / total) * 2 * Math.PI + rotation;
      const x = radius * Math.cos(angle) + container.offsetWidth / 2 - img.offsetWidth / 2;
      const y = radius * Math.sin(angle) + container.offsetHeight / 2 - img.offsetHeight / 2;
      img.style.left = `${x}px`;
      img.style.top = `${y}px`;
      const normalizedAngle = (angle % (2 * Math.PI) + 2 * Math.PI) % (2 * Math.PI);
      img.style.zIndex = Math.floor(Math.cos(normalizedAngle) * 10) + 10;
    });
  }

  function agregarImagen(src, titulo) {
    const img = document.createElement('img');
    img.src = src;
    img.loading = "lazy";
    img.addEventListener('mouseenter', () => isPaused = true);
    img.addEventListener('mouseleave', () => isPaused = false);

    container.appendChild(img);
    images.push(img);
    organizarCirculo();

    const thumbContainer = document.createElement('div');
    thumbContainer.className = 'thumb-container';

    const thumb = document.createElement('img');
    thumb.src = src;
    thumb.loading = "lazy";
    thumb.addEventListener("click", () => {
      const idx = images.findIndex(i => i.src === src);
      if (idx >= 0) {
        rotation = -(idx / images.length) * 2 * Math.PI;
        organizarCirculo();
      }
    });

    const label = document.createElement('div');
    label.textContent = titulo;

    thumbContainer.appendChild(thumb);
    thumbContainer.appendChild(label);
    franja.appendChild(thumbContainer);
  }

  function cargarURLs() {
    const urls = [
      {titulo: "5 electrodomï¿½sticos", src: "https://www.kissu.com.ec/imagenes//subcategorias/1659549117.jpg"},
      {titulo: "6 cocina", src: "https://www.kissu.com.ec/imagenes//productos/sm/17081008480.jpg"},
      {titulo: "7 tanque", src: "https://www.kissu.com.ec/imagenes//productos/sm/16789070110.jpg"},
      {titulo: "8 valvula gas", src: "https://www.kissu.com.ec/imagenes//productos/sm/17477744290.jpg"}
    ];
    urls.forEach(item => agregarImagen(item.src, item.titulo));
  }



  container.addEventListener('wheel', (e) => {
    e.preventDefault();
    speed += e.deltaY * -0.0005;
  });

  toggleButton.addEventListener('click', () => {
    franja.classList.toggle('hidden');
    toggleButton.textContent = franja.classList.contains('hidden') ? "Mostrar franja" : "Ocultar franja";
  });

  function animar() {
    if (!isPaused) rotation += speed;
    organizarCirculo();
    requestAnimationFrame(animar);
  }

  animar();
  window.addEventListener("load", cargarURLs);
</script>

</body>
</html>

